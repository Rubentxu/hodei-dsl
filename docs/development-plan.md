# Plan de Desarrollo - Hodei Pipeline DSL

## Objetivo General

Desarrollar un sistema Pipeline DSL en Kotlin que replique la funcionalidad completa de Jenkins Pipelines con mejoras modernas como type-safety, ejecuci√≥n paralela real con coroutines, y un sistema de plugins din√°mico.

## Metodolog√≠a de Desarrollo

### üß™ TDD/BDD Workflow
- **Test-Driven Development**: Ciclo obligatorio Red-Green-Refactor
- **Behavior-Driven Development**: Specs con Kotest para documentaci√≥n ejecutable
- **Conventional Commits**: Commits estructurados para cada feature
- **Pre-commit Hooks**: Validaci√≥n autom√°tica de tests y formato

**Ver**: [TDD Workflow Detallado](./tdd-workflow.md)

### üîÑ Flujo por Feature
1. **üî¥ RED**: Escribir tests BDD que fallan
2. **üü¢ GREEN**: Implementar c√≥digo m√≠nimo para pasar tests
3. **üîÑ REFACTOR**: Mejorar c√≥digo manteniendo tests verdes
4. **üíæ COMMIT**: Conventional commit con la feature completa

## Cronograma de Desarrollo

### **Fase 0: Alineaci√≥n con /docs y backlog inicial** üß≠
**Duraci√≥n**: 0.5-1 d√≠a  
**Estado**: üü° En Progreso

#### Tareas Principales
- [x] Revisar documentaci√≥n clave (/docs) y extraer requisitos
- [x] Sincronizar el plan con especificaciones existentes
- [x] Definir backlog inicial por m√≥dulo (core, compiler, execution, steps, plugins, cli, library)
- [x] Seleccionar specs objetivo para la primera iteraci√≥n y comandos de ejecuci√≥n
- [ ] Abrir issues/tickets por √©pica y m√≥dulo (opcional)

#### Criterios de Aceptaci√≥n
- Plan actualizado y alineado con /docs
- Fase 1 ajustada al estado real de la documentaci√≥n
- Backlog inicial definido y priorizado

#### Entregables
- Este archivo actualizado con Fase 0 y backlog inicial

---

### **Fase 1: Documentaci√≥n y Especificaciones** üìã
**Duraci√≥n**: 2-3 d√≠as  
**Estado**: üü° En Progreso

#### Tareas Principales
- [x] Crear estructura de documentaci√≥n
- [ ] Documentar arquitectura general del sistema
- [ ] Especificar APIs core detalladamente
- [ ] Definir sintaxis y sem√°ntica del DSL
- [ ] Documentar sistema de plugins
- [ ] Especificar modelo de ejecuci√≥n y concurrencia
- [ ] Crear ejemplos de integraci√≥n y casos de uso

#### Criterios de Aceptaci√≥n
- Documentaci√≥n t√©cnica completa y revisada
- Especificaciones detalladas de cada m√≥dulo
- Diagramas de arquitectura actualizados
- Ejemplos de uso documentados

#### Entregables
- `/docs/` completo con toda la documentaci√≥n
- Diagramas de arquitectura en Mermaid
- Especificaciones t√©cnicas detalladas

---

### **Fase 2: Reestructuraci√≥n del Proyecto** üèóÔ∏è
**Duraci√≥n**: 1 d√≠a  
**Estado**: ‚è≥ Pendiente  
**Dependencias**: Fase 1

#### Tareas Principales
- [ ] Reorganizar m√≥dulos seg√∫n arquitectura hexagonal
- [ ] Actualizar `libs.versions.toml` con todas las dependencias necesarias
- [ ] Configurar build scripts de Gradle
- [ ] Crear estructura de directorios por m√≥dulos
- [ ] Configurar plugins de Gradle necesarios

#### Criterios de Aceptaci√≥n
- Estructura modular clara y bien organizada
- Build system configurado correctamente
- Dependencias centralizadas y versionadas
- Convenciones de c√≥digo establecidas

#### Entregables
- Proyecto reestructurado con m√≥dulos separados
- Configuraci√≥n de Gradle actualizada
- Estructura de directorios final

---

### **Fase 3: Core API y DSL** ‚öôÔ∏è
**Duraci√≥n**: 3-4 d√≠as  
**Estado**: ‚úÖ Completada  
**Dependencias**: Fase 2

#### Tareas Principales (TDD/BDD)
- [x] **RED**: Escribir PipelineSpec con comportamientos esperados
- [x] **GREEN**: Implementar interfaces base del Pipeline DSL
- [x] **RED**: Escribir StageBuilderSpec para type-safe builders
- [x] **GREEN**: Crear builders type-safe para Pipeline, Stage, Steps
- [x] **RED**: Escribir ExecutionContextSpec para manejo de contextos
- [x] **GREEN**: Implementar sistema de contexto de ejecuci√≥n
- [x] **REFACTOR**: Aplicar principios SOLID y clean architecture
- [x] **COMMIT**: `feat(core): implement pipeline DSL foundation`

#### ‚ú® **Implementaci√≥n SOLID Extra (Completada)**
- [x] **FASE 1**: Crear infrastructure SOLID (StepHandler, Registry, AbstractStepHandler)
- [x] **FASE 2**: Migrar handlers simples (Echo, Shell, ArchiveArtifacts, PublishTestResults, Stash, Unstash)
- [x] **FASE 3**: Migrar handlers complejos (Dir, WithEnv, Parallel, Retry, Timeout)
- [x] **Tests**: 100% √©xito en todos los handlers implementados (EchoStepHandlerSpec, ComplexStepHandlersSpec)

#### Criterios de Aceptaci√≥n
- ‚úÖ DSL funcional con type-safety completa
- ‚úÖ API intuitiva y compatible con Jenkins
- ‚úÖ Validaci√≥n de sintaxis implementada
- ‚úÖ Cobertura de tests > 90%
- ‚úÖ **Sistema SOLID implementado y funcionando**

#### Entregables
- ‚úÖ M√≥dulo `core` completo y testado
- ‚úÖ API p√∫blica estable
- ‚úÖ Documentaci√≥n de API actualizada
- ‚úÖ **Sistema de handlers SOLID operativo**

---

### **Fase 4: Modernizaci√≥n DSL con Context Receivers** üîß
**Duraci√≥n**: 2-3 d√≠as  
**Estado**: ‚è≥ Pendiente  
**Dependencias**: Fase 3

#### Tareas Principales (TDD/BDD)
- [ ] **RED**: Escribir DSLContextReceiversSpec para nuevas APIs
- [ ] **GREEN**: Implementar context receivers en builders
- [ ] **RED**: Escribir ImprovedBuilderAPISpec para sintaxis moderna
- [ ] **GREEN**: Modernizar API de builders con context receivers
- [ ] **RED**: Escribir BackwardsCompatibilitySpec para compatibilidad
- [ ] **GREEN**: Mantener compatibilidad con API existente
- [ ] **REFACTOR**: Optimizar DSL con nuevas caracter√≠sticas de Kotlin
- [ ] **COMMIT**: `feat(core): modernize DSL with context receivers`

#### Criterios de Aceptaci√≥n
- Context receivers implementados correctamente
- API mejorada y m√°s fluida
- Compatibilidad hacia atr√°s mantenida
- Tests actualizados y funcionando

#### Entregables
- DSL modernizado con context receivers
- API mejorada para builders
- Documentaci√≥n actualizada

---

### **Fase 5: Cleanup y Consolidaci√≥n** üßπ
**Duraci√≥n**: 2-3 d√≠as  
**Estado**: ‚è≥ Pendiente  
**Dependencias**: Fase 4

#### Tareas Principales
- [ ] Eliminar c√≥digo legacy no utilizado
- [ ] Consolidar m√≥dulos execution/ con core/execution/
- [ ] Refactorizar duplicaciones de c√≥digo
- [ ] Decidir estructura final de m√≥dulos (steps/ vs core/handlers/)
- [ ] Optimizar imports y dependencies
- [ ] Limpiar comentarios TODO y FIXME

#### Criterios de Aceptaci√≥n
- C√≥digo legacy eliminado
- M√≥dulos consolidados correctamente
- No hay duplicaci√≥n de funcionalidad
- Estructura de proyecto final definida

#### Entregables
- Proyecto limpio y consolidado
- Arquitectura de m√≥dulos final
- Documentaci√≥n actualizada

---

### **Fase 6: Biblioteca de Steps Completa y Compatibilidad** üìù
**Duraci√≥n**: 3-4 d√≠as  
**Estado**: ‚è≥ Pendiente  
**Dependencias**: Fase 5

#### Tareas Principales
- [ ] Implementar handlers para steps de Docker (`docker.image`, `docker.withRegistry`)
- [ ] Implementar handlers para steps de Git y SCM (`git`, `checkout`)
- [ ] Implementar handlers para steps avanzados (`input`, `emailext`, `build`)
- [ ] Crear suite de tests de compatibilidad que verifique el comportamiento de cada step contra su an√°logo en Jenkins
- [ ] Documentaci√≥n completa de todos los steps disponibles
- [ ] Validaci√≥n de par√°metros y compatibilidad sint√°ctica con Jenkins

#### Criterios de Aceptaci√≥n
- Biblioteca de steps principales de Jenkins completa y funcional bajo el sistema de handlers SOLID
- Cobertura de tests alta para todos los handlers implementados
- Tests de compatibilidad que validan la paridad de comportamiento con Jenkins
- Documentaci√≥n detallada de uso para cada step

#### Entregables
- Handlers completos para todos los steps principales de Jenkins
- Suite de tests de compatibilidad Jenkins
- Documentaci√≥n de referencia de steps

---

### **Fase 7: Runtime de Carga de Plugins** üîå
**Duraci√≥n**: 4-5 d√≠as  
**Estado**: ‚è≥ Pendiente  
**Dependencias**: Fase 3, Fase 4

#### Tareas Principales
- [ ] Implementar la interfaz `HodeiPlugin` como punto de entrada para plugins externos
- [ ] Implementar el sistema de escaneo del directorio `/plugins` al arranque de Hodei
- [ ] Integrar `java.util.ServiceLoader` para descubrir y ejecutar el m√©todo `register()` de cada plugin
- [ ] **TAREA CR√çTICA**: Modificar el m√≥dulo `:compiler` para que el `classpath` de compilaci√≥n de los scripts `.kts` incluya los JARs de los plugins descubiertos
- [ ] Crear un repositorio de ejemplo con un plugin completo (`slack-notify` o similar) para probar todo el flujo
- [ ] Documentar el proceso de desarrollo de plugins en `PLUGIN_DEVELOPMENT_GUIDE.md`

#### Criterios de Aceptaci√≥n
- Un JAR de un plugin colocado en la carpeta `/plugins` es cargado al reiniciar Hodei
- Los steps definidos en el plugin est√°n disponibles en la DSL con autocompletado en el IDE
- El pipeline se ejecuta correctamente utilizando steps del `core` y de plugins externos
- La gu√≠a de desarrollo de plugins es clara y permite a un tercero crear un plugin funcional

#### Entregables
- Sistema de carga de plugins operativo con ServiceLoader
- Plugin de ejemplo completo como referencia
- Gu√≠a de desarrollo de plugins detallada
- Integraci√≥n del classpath de plugins en el compilador

#### Notas sobre Alcance v1.0
- **ClassLoader isolation** y **Sandboxing de seguridad** se consideran funcionalidades para versi√≥n 2.0
- Para v1.0 se utilizar√° un ClassLoader compartido como punto de partida seguro y realista

---

### **Fase 8: CLI Implementation** üíª
**Duraci√≥n**: 2-3 d√≠as  
**Estado**: ‚è≥ Pendiente  
**Dependencias**: Fase 7

#### Tareas Principales
- [ ] Interface de l√≠nea de comandos
- [ ] Watch mode para desarrollo
- [ ] Sistema de configuraci√≥n
- [ ] Logging estructurado
- [ ] Manejo de errores user-friendly

#### Criterios de Aceptaci√≥n
- CLI intuitiva y funcional
- Watch mode operativo
- Configuraci√≥n flexible
- Mensajes de error claros

#### Entregables
- Aplicaci√≥n CLI completa
- Documentaci√≥n de comandos
- Scripts de instalaci√≥n

---

### **Fase 9: API Embebida** üìö
**Duraci√≥n**: 2-3 d√≠as  
**Estado**: ‚è≥ Pendiente  
**Dependencias**: Fase 8

#### Tareas Principales
- [ ] Library API para integraci√≥n
- [ ] Spring Boot starter
- [ ] Reactive streams support
- [ ] Java compatibility layer
- [ ] Documentaci√≥n de integraci√≥n

#### Criterios de Aceptaci√≥n
- API embebida funcional
- Integraci√≥n Spring Boot
- Compatibilidad Java completa
- Documentaci√≥n de integraci√≥n

#### Entregables
- Librer√≠a embebible
- Spring Boot starter
- Ejemplos de integraci√≥n

---

### **Fase 10: Testing e Integraci√≥n** üß™
**Duraci√≥n**: 3-4 d√≠as  
**Estado**: ‚è≥ Pendiente  
**Dependencias**: Fase 9

#### Tareas Principales
- [ ] Tests de integraci√≥n end-to-end
- [ ] Tests de performance y benchmarking
- [ ] Tests de compatibilidad con Jenkins
- [ ] Ejemplos completos y funcionales
- [ ] Documentaci√≥n de usuario final

#### Criterios de Aceptaci√≥n
- Suite completa de tests de integraci√≥n
- Performance benchmarks satisfactorios
- Compatibilidad Jenkins verificada
- Ejemplos funcionando correctamente

#### Entregables
- Suite completa de tests
- Reportes de performance
- Ejemplos de usuario

---

### **Fase 11: Optimizaci√≥n y Deployment** üöÄ
**Duraci√≥n**: 2-3 d√≠as  
**Estado**: ‚è≥ Pendiente  
**Dependencias**: Fase 10

#### Tareas Principales
- [ ] Optimizaciones de rendimiento
- [ ] Packaging para distribuci√≥n
- [ ] CI/CD pipeline setup
- [ ] Documentaci√≥n de release
- [ ] Preparaci√≥n de versi√≥n 1.0

#### Criterios de Aceptaci√≥n
- Performance optimizado
- Distribuci√≥n automatizada
- CI/CD funcional
- Release preparation completa

#### Entregables
- Sistema optimizado
- CI/CD pipeline
- Release 1.0 preparado

---

## Estimaciones Totales y Progreso Real

| Fase | Duraci√≥n | Tipo | Estado | Progreso Real |
|------|----------|------|--------|---------------|
| **Fase 1-2** | 3-4 d√≠as | Preparaci√≥n | ‚è≥ Pendiente | 0% |
| **Fase 3** | 3-4 d√≠as | Core Development | ‚úÖ **Completada** | **100%** ‚úÖ |
| **Fase 4** | 2-3 d√≠as | DSL Modernizaci√≥n | ‚è≥ Pendiente | 0% üîß |
| **Fase 5** | 2-3 d√≠as | Cleanup & Consolidaci√≥n | ‚è≥ Pendiente | 0% üßπ |
| **Fase 6** | 3-4 d√≠as | Steps Biblioteca Completa | ‚è≥ Pendiente | **~15%** üìù |
| **Fase 7** | 4-5 d√≠as | Plugin Runtime | ‚è≥ Pendiente | 0% üîå |
| **Fase 8-9** | 4-6 d√≠as | Interfaces (CLI/Library) | üü° **B√°sico** | **~25%** üíª |
| **Fase 10-11** | 5-7 d√≠as | Testing & Deploy | ‚è≥ Pendiente | 0% |
| **TOTAL** | **28-37 d√≠as** | **Completo** | **üü° En Progreso** | **~47% Completado** üìä |

### üìä Progreso por M√≥dulo

| M√≥dulo | Archivos Impl. | Tests | Estado | Completitud |
|--------|----------------|-------|---------|-------------|
| **core** | 51 archivos | 19 specs | ‚úÖ **Completo SOLID** | **98%** |
| **compiler** | 9 archivos | 10 specs | üîß Avanzado | **80%** |
| **execution** | 3 archivos | 2 specs | üöÄ B√°sico | **40%** |
| **cli** | 2 archivos | 0 specs | üíª B√°sico | **25%** |
| **examples** | 3 ejemplos | 0 specs | üí° Funcional | **80%** |
| **plugins** | 1 archivo | 0 specs | üìù Esqueleto | **10%** |
| **steps** | 1 archivo | 0 specs | üìù Esqueleto | **10%** |
| **library** | 1 archivo | 0 specs | üìö Esqueleto | **10%** |

## Hitos Importantes

- **üéØ Hito 1** ‚úÖ **COMPLETADO** (Final Fase 3): Core DSL funcional con sistema SOLID de handlers
- **üéØ Hito 2** (Final Fase 5): Motor de ejecuci√≥n completo con structured concurrency
- **üéØ Hito 3** (Final Fase 7): Runtime de carga de plugins operativo con ServiceLoader
- **üéØ Hito 4** (Final Fase 9): APIs p√∫blicas finalizadas (CLI + Library)
- **üéØ Hito 5** (Final Fase 11): Release 1.0 lista con distribuci√≥n completa

## Riesgos y Mitigaciones

### Riesgos T√©cnicos
- **Complejidad del Kotlin Script Engine**: Mitigaci√≥n con POCs tempranos
- **Performance de ejecuci√≥n paralela**: Benchmarking continuo
- **Compatibilidad con Jenkins**: Tests de compatibilidad extensivos

### Riesgos de Cronograma
- **Estimaciones optimistas**: Buffer de 20% en cada fase
- **Dependencias entre fases**: Paralelizaci√≥n donde sea posible
- **Complejidad no prevista**: Reviews t√©cnicas frecuentes

### Riesgos Adicionales Identificados
- **Complejidad del Classpath de Scripting**: La manipulaci√≥n del classpath del compilador de scripts de Kotlin puede ser delicada. Una mala configuraci√≥n podr√≠a llevar a errores de "clase no encontrada" dif√≠ciles de depurar.
  - **Mitigaci√≥n**: Crear un test de integraci√≥n temprano (parte de la Fase 7) que compile y ejecute un script usando un step de un plugin de prueba.

---

**Versi√≥n del Plan**: 1.0  
**Fecha de Creaci√≥n**: $(date +'%Y-%m-%d')  
**Pr√≥xima Revisi√≥n**: Semanal

## Backlog Inicial por M√≥dulo (alineado con /docs)

Esta secci√≥n deriva directamente de las especificaciones en /docs y prioriza un arranque incremental. Cada √≠tem referencia su documento base cuando aplica.

### 1) N√∫cleo (core) ‚úÖ **COMPLETADO - SISTEMA SOLID FUNCIONAL**
- Referencias: docs/api-core-spec.md, docs/dsl-specification.md, docs/architecture.md
- ‚úÖ MVP DSL validado: pipeline, agent(any/label), environment(set/credentials), stages, steps (echo, sh), post(always)
- ‚úÖ ExecutionContext: variables, workspace, logger configurable, stash b√°sico
- ‚úÖ WhenCondition: all/any/not + DSL (ya modelado)
- ‚úÖ Builders: PipelineBuilder, StageBuilder, StepsBuilder coherentes con la spec
- ‚úÖ **Sistema SOLID de Handlers**: StepHandler, StepHandlerRegistry, AbstractStepHandler
- ‚úÖ **Handlers Simples**: Echo, Shell, ArchiveArtifacts, PublishTestResults, Stash, Unstash
- ‚úÖ **Handlers Complejos**: Dir, WithEnv, Parallel, Retry, Timeout

#### Estad√≠sticas Actualizadas del M√≥dulo Core:
- **üìÅ Total de archivos**: 51 archivos Kotlin implementados
- **üß™ Tests implementados**: 19 especificaciones Kotest
- **‚ö° Handlers SOLID**: **13 handlers** implementados bajo arquitectura SOLID
- **üéØ Cobertura funcional**: ~98% completitud

#### Tests Ejecutados y Exitosos:
- ‚úÖ gradle :core:test --tests "dev.rubentxu.hodei.core.dsl.DSLBuilderSpec"
- ‚úÖ gradle :core:test --tests "dev.rubentxu.hodei.core.domain.WhenConditionSpec"
- ‚úÖ gradle :core:test --tests "dev.rubentxu.hodei.core.domain.WhenConditionDSLSpec"
- ‚úÖ gradle :core:test --tests "dev.rubentxu.hodei.core.execution.ExecutionContextSpec"
- ‚úÖ gradle :core:test --tests "dev.rubentxu.hodei.core.execution.ConfigurableLoggerSpec"
- ‚úÖ gradle :core:test --tests "dev.rubentxu.hodei.core.execution.StashSystemSpec"
- ‚úÖ gradle :core:test --tests "dev.rubentxu.hodei.core.execution.handlers.EchoStepHandlerSpec" (4/4 tests ‚úÖ)
- ‚úÖ gradle :core:test --tests "dev.rubentxu.hodei.core.execution.handlers.HandlerRegistrationSpec" (2/2 tests ‚úÖ)
- ‚úÖ gradle :core:test --tests "dev.rubentxu.hodei.core.execution.handlers.ComplexStepHandlersSpec" (**TODOS** los handlers complejos ‚úÖ)
- ‚úÖ gradle :core:test --tests "dev.rubentxu.hodei.core.execution.handlers.ComplexHandlerRegistrationVerificationSpec" (Verificaci√≥n registro ‚úÖ)

#### Sistema SOLID de Handlers - Estado Actual:
- ‚úÖ **FASE 1**: Infrastructure (StepHandler, Registry, AbstractStepHandler) - **COMPLETADA**
- ‚úÖ **FASE 2**: Handlers simples (Echo, Shell, ArchiveArtifacts, PublishTestResults, Stash, Unstash) - **COMPLETADA**
- ‚úÖ **FASE 3**: Handlers complejos (Dir, WithEnv, Parallel, Retry, Timeout) - **COMPLETADA**
- ‚è≥ **FASE 4**: Modernizaci√≥n DSL con Context Receivers - **PENDIENTE**
- ‚è≥ **FASE 5**: Cleanup c√≥digo legacy y consolidaci√≥n de m√≥dulos - **PENDIENTE**

#### Lista Completa de Handlers Implementados (13 total):
1. **AbstractStepHandler** - Clase base con patr√≥n Template Method
2. **EchoStepHandler** - Manejo de echo steps
3. **ShellStepHandler** - Ejecuci√≥n de comandos shell
4. **ArchiveArtifactsStepHandler** - Archivado de artefactos
5. **PublishTestResultsStepHandler** - Publicaci√≥n de resultados de tests
6. **StashStepHandler** - Almacenamiento temporal de archivos
7. **UnstashStepHandler** - Recuperaci√≥n de archivos stash
8. **DirStepHandler** - Operaciones de directorio con contexto
9. **WithEnvStepHandler** - Manipulaci√≥n de variables de entorno
10. **ParallelStepHandler** - Ejecuci√≥n paralela con coroutines
11. **RetryStepHandler** - L√≥gica de retry con backoff exponencial
12. **TimeoutStepHandler** - Manejo de timeouts con cancelaci√≥n
13. **DefaultHandlerRegistration** - Registro autom√°tico de handlers

#### Pr√≥ximas Mejoras de Core:
- **Total de 13 handlers implementados** funcionando con arquitectura SOLID completa
- Sistema listo para extensi√≥n con nuevos handlers de Docker, Git, etc. en Fase 6
- Arquitectura extensible y mantenible preparada para plugins

### 2) Motor de Ejecuci√≥n (execution) üöÄ **ESTADO**: Implementaci√≥n B√°sica
- Referencias: docs/execution-model.md, docs/architecture.md
- ‚úÖ **Implementado**: PipelineExecutor b√°sico en m√≥dulo execution/
- ‚úÖ **Implementado**: ExecutionContext propio del m√≥dulo
- ‚ö†Ô∏è **Nota**: Existe duplicaci√≥n con core/execution/ - requiere consolidaci√≥n
- üìÇ **Archivos**: 3 archivos principales implementados
- Tests candidatos:
  - gradle :execution:test --tests "dev.rubentxu.hodei.execution.BasicPipelineExecutorSpec"
  - gradle :execution:test --tests "dev.rubentxu.hodei.execution.AdvancedPipelineExecutorSpec"

### 3) Compilador (compiler) üîß **ESTADO**: Implementaci√≥n Avanzada
- Referencias: docs/session-context-compiler-runtime.md, compiler/README.md
- ‚úÖ **Implementado**: HybridCompiler, GradleCompiler, ScriptCompiler (clases principales)
- ‚úÖ **Implementado**: CacheManager con SHA-256, LibraryManager, RuntimeIntegration
- ‚úÖ **Implementado**: PluginSystem para carga din√°mica
- ‚úÖ **Implementado**: LibraryConfiguration para manejo de dependencias
- üìÇ **Archivos**: 9 archivos principales + 10 specs implementados
- **üìä Funcionalidades implementadas**: Compilaci√≥n h√≠brida, cache, plugins, integraci√≥n runtime
- Tests disponibles:
  - ‚úÖ CacheManagerSpec, LibraryManagerSpec, RuntimeIntegrationSpec, LibraryConfigurationSpec
  - ‚úÖ HybridCompilerSpec, GradleCompilerSpec, ScriptCompilerSpec
  - ‚úÖ AdvancedIntegrationSpec, EndToEndIntegrationSpec, RealScriptCompilationSpec

### 4) Steps (steps) üìù **ESTADO**: Consolidaci√≥n Pendiente
- Referencias: docs/dsl-specification.md (secci√≥n Steps), docs/api-core-spec.md
- ‚úÖ **Implementado en core**: 13 handlers SOLID funcionales en core/execution/handlers/
- ‚ö†Ô∏è **Nota**: Los steps est√°n centralizados en el m√≥dulo core (arquitectura actual)
- üìÇ **Archivos**: Solo package.kt (esqueleto en steps/), handlers en core/
- ‚û°Ô∏è **Decisi√≥n arquitectural**: Mantener handlers en core o mover a steps/ en Fase 5 (cleanup)

### 5) Plugins (plugins) üîå **ESTADO**: Esqueleto B√°sico
- Referencias: docs/plugin-system.md
- üìÇ **Archivos**: Solo package.kt (esqueleto)
- ‚ö†Ô∏è **Nota**: PluginSystem est√° implementado en compiler/PluginSystem.kt
- ‚û°Ô∏è **Pendiente**: Implementar runtime de carga (ServiceLoader) como est√° planificado en Fase 7

### 6) CLI (cli) üíª **ESTADO**: Implementaci√≥n B√°sica
- Referencias: docs/architecture.md (adapters)
- ‚úÖ **Implementado**: Main.kt b√°sico
- üìÇ **Archivos**: 2 archivos implementados
- ‚û°Ô∏è **Pendiente**: Ampliar funcionalidad de comandos y opciones

### 7) Librer√≠a embebida (library) üìö **ESTADO**: Esqueleto B√°sico
- API m√≠nima para invocar pipelines desde c√≥digo Kotlin/Java
- üìÇ **Archivos**: Solo package.kt (esqueleto)
- ‚û°Ô∏è **Pendiente**: Implementar API p√∫blica para integraci√≥n

### 8) Ejemplos (examples) üí° **ESTADO**: Funcionales
- ‚úÖ **Implementado**: 3 ejemplos de pipelines (.pipeline.kts)
  - simple-pipeline.kts
  - advanced-parallel.pipeline.kts
  - test-integration.pipeline.kts
- ‚úÖ **Funcional**: Ejemplos alineados con DSL actual del core

---

## Iteraci√≥n 0 (1‚Äì2 d√≠as): entregable m√≠nimo ejecutable
- Objetivo: ejecutar pipelines b√°sicos con echo/sh y logging, validando el DSL base y el contexto de ejecuci√≥n.
- Entregables:
  - DSL base funcional (core)
  - Ejecuci√≥n secuencial de stages/steps (execution)
  - Compilaci√≥n de scripts simple si se usa .kts (compiler) o builder en c√≥digo
- Criterios de aceptaci√≥n:
  - Specs core listados en verde
  - BasicPipelineExecutorSpec verde o parcialmente filtrado sin dependencias externas
- Comandos √∫tiles:
  - gradle :core:test --tests "dev.rubentxu.hodei.core.*"
  - gradle :execution:test --tests "dev.rubentxu.hodei.execution.BasicPipelineExecutorSpec"
  - gradle :compiler:test --tests "dev.rubentxu.hodei.compiler.CacheManagerSpec"

---

## Selecci√≥n de specs objetivo (primera iteraci√≥n)
- Core: DSLBuilderSpec, WhenConditionSpec, ExecutionContextSpec, ConfigurableLoggerSpec, StashSystemSpec
- Execution: BasicPipelineExecutorSpec (si el entorno lo permite)
- Compiler: CacheManagerSpec, HybridCompilerSpec (tiempos moderados)

---

Nota: para entornos con limitaciones (Docker/Testcontainers), ajustar ejecuci√≥n con --tests selectivo y desactivar paralelismo de JUnit si es necesario (-Djunit.jupiter.execution.parallel.enabled=false).